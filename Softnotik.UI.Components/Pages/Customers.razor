@page "/customers"
@using Softnotik.UI.Shared.ViewModels.CustomerViewModels

@inject ICustomerService _customerService

<h2 class="white-text"><b>Customers</b></h2>
<hr class="white-horizontal-line" />

<div class="col-12 row">
    <input type="text" class="col-12 form-control dark-theme-textbox" placeholder="search" />
</div>
<br />
@if (!customers.Any())
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Fullname</th>
                <th>Email</th>
                <th>Address</th>
                <th>ZipCode</th>
                <th>Phone</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in customers)
            {
                <tr>
                    <td>@customer.Id.ToString()</td>
                    <td>@customer.FullName</td>
                    <td>@customer.Email</td>
                    <td>@customer.Address</td>
                    <td>@customer.Zipcode</td>
                    <td>@customer.Phone</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private IEnumerable<CustomerVM> customers = [];

    protected override async Task OnInitializedAsync() => customers = await _customerService.GetAll();
}
